@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Results</h2>
<div id="resultsGrid" style="height: 450px"></div>

<script>
    $(function() {
        $('#resultsGrid').w2grid({
            name: 'resultsGrid',
            url: '@Url.RouteUrl("DefaultApi", new { httproute = "", controller = "GameResultGrid" })',
            autoLoad: true,
            limit: 500,
            msgRefresh: 'Loading',
            show: {
                toolbar: false,
                footer: false,
                toolbarSave: false,
                toolbarDelete: false,
                toolbarSearch: false,
                toolbarReload: false,
                toolbarColumns: false
            },
            columns: [
                {
                    field: 'GridTimestamp',
                    caption: 'Timestamp',
                    size: '20%',
                    sortable: false,
                    resizable: true,
                    render: 'text'
                },
                {
                    field: 'Winner.UserName',
                    caption: 'Winner',
                    size: '15%',
                    sortable: false,
                    resizable: true,
                    render: 'text'
                },
                {
                    field: 'WinnerRating',
                    caption: 'Winner Rating',
                    size: '10%',
                    sortable: false,
                    resizable: true,
                    render: 'number'
                },
                {
                    field: 'WinnerDelta',
                    caption: 'Winner Delta',
                    size: '10%',
                    sortable: false,
                    resizable: true,
                    render: 'number'
                },
                {
                    field: 'Loser.UserName',
                    caption: 'Loser',
                    size: '15%',
                    sortable: false,
                    resizable: true,
                    render: 'text'
                },
                {
                    field: 'LoserRating',
                    caption: 'Loser Rating',
                    size: '10%',
                    sortable: false,
                    resizable: true,
                    render: 'number'
                },
                {
                    field: 'LoserDelta',
                    caption: 'Loser Delta',
                    size: '10%',
                    sortable: false,
                    resizable: true,
                    render: 'number'
                },
                {
                    caption: 'Score',
                    size: '10%',
                    sortable: false,
                    resizable: true,
                    render: 'text',
                    render: function(record) {
                        return record.WinnerScore + ' - ' + record.LoserScore;
                    }
                }
            ]
        });
    });
</script>